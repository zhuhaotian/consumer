
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>首页</title>
    <link rel="stylesheet" type="text/css" href="/zht/css/css.css">
    <link rel="stylesheet" href="/js/bootstrap3/css/bootstrap.css">
    <script  type="text/javascript" src="/jquery-2.0.3.min.js"></script>
    <link href="/zht5121/css/jquery.slideBox.css" rel="stylesheet" type="text/css"/>
    <script src="/zht5121/js/jquery.slideBox.js" type="text/javascript"></script>
    <script src="/js/bootstrap3/js/bootstrap.js"></script>

</head>
<style type="text/css">
    td{vertical-align: middle !important;}
    .form-group{padding: 5px 0;}
</style>
<script type="text/javascript">
    $(function () {
       getShop();
        getAllPrice();
    })
    function getShop() {
        $.ajax({
            url:"/details/getShop",
            type:"post",
            success:function(data){
                var count='';
               if(data==null){
                   alert("空空如也,快去购物")
               }
               $.each(data,function (index,obj) {
                   count +="<tr>";
                   count +="<td><img src='/"+obj.shp_tp+"' alt=''></td>";
                   count +="<td>sku_mch</td>";
                   count +="<td>" +
                       "                颜色：<span style='color:#ccc'>白色</span><br>" +
                       "                尺码：<span style='color:#ccc'>L</span>" +
                       "            </td>";
                   count +="<td>"+obj.jg+"</td>";
                   count +="<td>" +
                       "                <button class='minus' onclick='addCount()'>-</button>" +
                         "                <input id='text_box' type='text' name='min' value='"+obj.tjshl+"' style='width:50px;text-align:center'>" +
                         "                <button class='plus' onclick='addCount()'>+</button>'" +
                       "    </td>";
                   count +="<td class='totalPrice'></td>"
                   count +="<td>删除 </br>" +
                       "                <a href='javascript:void(0)'>移动到我的关注</a>" +
                       "            </td>"
                   count +="</tr>"
               })
            },
            error:function(){
                alert("失败了");
            },
        })
    }
    function addCount(){
        var nun=$("#text_box").val();
        $(".plus").click(function(){
            nun++;
            $("#text_box").val(nun);
            $(".totalPrice").html(($("#text_box").val()*$(".price").html()))

        })
          $(".minus").click(function(){
              nun--;
              $("#text_box").val(nun);
              if($("#text_box").val()<=0){
                  $("#text_box").val(0);
              }
              $(".totalPrice").html(($("#text_box").val()*$(".price").html()))

          })
        getAllPrice();
      }
     function getAllPrice() {
        var aa= $(".totalPrice").html();
        $(".allPPrice").html(aa)
     }


</script>
<body>
<div class="top">
    <div class="top_text">
        <a href="">用户登录</a>
        <a href="">用户注册</a>
        <a href="">供应商登录</a>
        <a href="">供应商注册</a>
    </div>
</div>
<div class="top_img">
    <img src="/images/top_img.jpg" alt="">
</div>
<div class="search">
    <div class="logo"><img src="/images/logo.jpg" alt=""></div>
    <div class="search_on">
        <div class="se">
            <input type="text" name="search" class="lf">
            <input type="submit" class="clik" value="搜索" style="height: 32px;">
        </div>
        <div class="se">
            <a href="">取暖神奇</a>
            <a href="">1元秒杀</a>
            <a href="">吹风机</a>
            <a href="">玉兰油</a>
        </div>
    </div>
    <div class="card" style="height: 36px;">
        <a href="">购物车<div class="num">0</div></a>

        <!--购物车商品-->
        <div class="cart_pro"  onmouseover="onshowthree()">
            <h6>最新加入的商品</h6>

            <div class="gobottom"  onmouseout="onhidethree()">
                共<span>2</span>件商品&nbsp;&nbsp;&nbsp;&nbsp;
                共计￥<span>20000</span>
                <button class="goprice" onclick="window.location.href='/good/toshop'">去购物车</button>


            </div>
        </div>

    </div>
</div>

<div class="Cbox">
    <table class="table table-striped table-bordered table-hover">
        <thead>
        <tr>
            <th>商品图片</th>
            <th>商品名称</th>
            <th>商品属性</th>
            <th>商品价格</th>
            <th>商品数量</th>
            <th>实际价格</th>
            <th>操作</th>
        </tr>
        </thead>
        <tbody id="tbody">

        <tr>
            <td><img src="/images/icon_2.jpg" alt=""></td>
            <td>商品名称</td>
            <td>
                颜色：<span style='color:#ccc'>白色</span><br>
                尺码：<span style='color:#ccc'>L</span>
            </td>
            <td class="price">199.00</td>
            <td>
                <button class="minus" onclick="addCount()">-</button>
                <!--<a href="javascript:void(0)" class="easyui-linkbutton" class="minus">-</a>-->
                <input id="text_box" type="text" name="min" value="1" style="width:50px;text-align:center">
               <!-- <a href="javascript:void(0)" class="easyui-linkbutton"  class="plus">+</a>-->
                <button class="plus" onclick="addCount()">+</button>
            </td>
            <td class="totalPrice"></td>
            <td>删除 </br>
                <a href="javascript:void(0)">移动到我的关注</a>
            </td>

        </tr>

        </tbody>
    </table>
</div>
<div class="Cprice">
    <div class="y3 fl">总价:</div>
    <div class="allPPrice">199.00</div>
    <div class="jiesuan">结算</div>
</div>

<div class="footer">
    <div class="top"></div>
    <div class="bottom"><img src="/images/foot.jpg" alt=""></div>
</div>

<!-- 模态弹出窗内容 -->
<div class="modal" id="mymodal-data" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title">新添收货地址</h4>
            </div>
            <div class="modal-body" style="overflow:hidden">
                <div class="form-group">
                    <div class="col-sm-10">
                        <input type="email" class="form-control" id="inputEmail1" placeholder="请输入您的所在地区">
                    </div>
                    <br>
                </div>
                <div class="form-group">
                    <div class="col-sm-10">
                        <input type="email" class="form-control" id="inputEmail2" placeholder="请输入您的详细地址">
                    </div>
                    <br>
                </div>
                <div class="form-group">
                    <div class="col-sm-10">
                        <input type="email" class="form-control" id="inputEmail3" placeholder="请输入您的邮政编码">
                    </div>
                    <br>
                </div>
                <div class="form-group">
                    <div class="col-sm-10">
                        <input type="email" class="form-control" id="inputEmail4" placeholder="请输入您的收货人姓名">
                    </div>
                    <br>
                </div>
                <div class="form-group">
                    <div class="col-sm-10">
                        <input type="email" class="form-control" id="inputEmail5" placeholder="请输入您的手机号码">
                    </div>
                    <br>
                </div>
                <div class="form-group">
                    <div class="col-sm-10">
                        <input type="email" class="form-control" id="inputEmail6" placeholder="请输入您的电话号码">
                    </div>
                    <br>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                <button type="button" class="btn btn-primary">保存</button>
            </div>
        </div>
    </div>
</div>
<script>
    function onshowthree(){
        $(".cart_pro").show();
        $.ajax({
            url:"/shoppingcart",
            type:"post",
            success:function(result){
                //  data.shp_tp.substring()
                var count = "";
                $.each(result   ,function(index,data){
                    count+="<div class=\"one\" >";
                    count+="<img src="+data.shp_tp+" width='66px' height='66px'>";
                    count+="<span>"+data.sku_mch+"</span><br/>";
                    count+="<span><b>"+data.hj+"</b><a href='javascript:deleteaa("+data.Id+")'>删除</a></span><br/>";
                    count+="</div>";
                })
                $(".cart_pro").html(count)
            },
            error:function(){
                alert("失败了");
            }
        })
    }
    function onhidethree(){
        $(".cart_pro").hide();
    }






</script>
</body>
</html>