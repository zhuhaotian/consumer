<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jk.mapper.SearchMapper">
   <select id="comment" resultType="com.jk.bean.Comment">
       SELECT
            b.yh_id,
            a.yh_mch,
            b.plnr,
            c.sku_mch,
            c.kcdz,
            d.shp_mch,
            e.url,
            b.plshj
        FROM
            t_mall_user_account a,
            t_mall_product_comment b,
            t_mall_sku c,
            t_mall_product d,
            t_mall_product_image e
        WHERE
        (b.yh_id = a.Id or b.yh_id = 0)
        AND b.sku_id = c.Id
        AND b.shp_id = d.Id
        and a.yh_tx=e.id
        and  d.Id=#{id}
        group by b.yh_id
   </select>
   <!--新增评论-->
   <insert id="rules">
       insert into t_mall_product_comment  (yh_id,plnr,plshj,hpjb,shp_id) values (#{yh_id},#{plnr},now(),#{hpjb},#{shp_id})
   </insert>
</mapper>